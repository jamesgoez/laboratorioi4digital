<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core">
    <p:outputPanel id="outputCambiarContraseñaUsuario">
        <h:form id="frmChangePassword">
            <p:dialog id="dialogCambiarContraseñaUsuario" header="Cambiar contraseña de acceso" widgetVar="dlgCambiarContrasenaUsuario" visible="true" closeOnEscape="true" resizable="false"
                      rendered="#{user.renderedDlgCambiarContraseñaUsuario}">
                <p:ajax event="close" listener="#{user.closeChangePasswordUser}" update="outputCambiarContraseñaUsuario"/>
                <p:panel id="panelCambiarContraseñaUsuario" styleClass="style-ui-panel">
                    <h:panelGrid id="pgCambiarContraseñaUsuario" styleClass="ui-panelgrid" columns="3" style="margin-top:1px;">
                        <h:outputLabel class="texto-outputlabel" value="Contraseña actual: "/>
                        <p:password id="contraseñaActual" required="true" requiredMessage="Campo obligatorio *." value="#{user.usuarioProfileEdit.passwordold}"
                                    validatorMessage="La contraseña debe tener mínimo 5 caracteres.">
                            <f:validateLength minimum="4" maximum="20"/>
                        </p:password>
                        <p:message for="contraseñaActual" id="msgContraseñaActual"/>
                        <h:outputLabel class="texto-outputlabel" value="Nueva contraseña: "/>
                        <p:password id="nuevaContraseña" required="true" requiredMessage="Campo obligatorio *." value="#{user.usuarioProfileEdit.newpassword}"
                                    validatorMessage="La contraseña debe tener mínimo 5 caracteres.">
                            <f:validateLength minimum="4" maximum="20"/>
                        </p:password>
                        <p:message for="nuevaContraseña" id="msgNuevaContraseña"/>
                        <h:outputLabel class="texto-outputlabel" value="Confirmar contraseña: "/>
                        <p:password id="confirmarContraseña" required="true" requiredMessage="Campo obligatorio *." value="#{user.usuarioProfileEdit.confirmpassword}"
                                    validatorMessage="La contraseña debe tener mínimo 5 caracteres.">
                            <f:validateLength minimum="4" maximum="20"/>
                        </p:password>
                        <p:message for="confirmarContraseña" id="msgConfirmarContraseña"/>
                    </h:panelGrid>
                    <p:commandButton value="Actualizar" style="margin-top:5px;" actionListener="#{user.changePasswordUser}" update="pgCambiarContraseñaUsuario"
                                     process="@form pgCambiarContraseñaUsuario" icon="ui-icon-check">
                        <p:confirm header="Confirmar" message="Se requiere iniciar sesión para cambiar de contraseña, Presione SI para confirmar" icon="ui-icon-alert"/>
                    </p:commandButton>
                </p:panel>
            </p:dialog>
        </h:form>
    </p:outputPanel>
</ui:composition>
